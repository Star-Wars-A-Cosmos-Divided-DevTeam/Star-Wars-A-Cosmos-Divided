/* ----------------------------------------------------------------------------

Introduction: SW:ACD 0.3.7

Author : Lafiel

Description:
This part is meant to reduce lag for large builds.
The idea is to have a large part that when damaged and gets destroyed gets replaced by smaller 1x1 parts.
The solution implemented here is the "low-persistence" methode:
Where the large part has 1% of the total health it normally would represent. 
This was choosen to prevent simple destrution by stray PD shots or low damage shots which usually tend to be employed on mass, hence, extend the lag reduction goal.
When the part is destroyed the replacing 1x1 parts appear at 98% of their nominal heatlh. This is done for balance reasons.
The gap of 1% is intentional to compensate for loss damage values from powerful shots exceeding the part's 1% health.
This means on average there's a 0.5% discrepancy in damage loss or health loss. Higher excess damage loss cannot be accounted with current mechanics. 
Needless to say the loss fraction increases proportional to part size even with constant percentage.
It is currently not possible or viable to achieve better precision for balance. 


Versions:

 o 1.0 Cosmoteer 0.14.4+ compatible; cosmoteer 0.15.14 mod introduction


---------------------------------------------------------------------------- */

Part : &<./Data/ships/terran/base_part_terran.rules>/Part
{
	NameKey = "Parts/DooniumArmor2x2"
	IconNameKey = "Parts/DooniumArmor2x2Icon"
	ID = SW.doonium_armor_8x8
	EditorGroup = "Defenses"
	DescriptionKey = "Parts/DooniumArmorDesc"
	Resources
	[
		[steel, 512] //8*8*8
	]
	AIValueFactor = 0
	Size = [8, 8]
	IsRotateable = false
	SelectionTypeID = "armor"
	MaxHealth = 2560 //must not be more than 2560 or 1% of 256000; for balance reason should be destroyed soonish
	ExplosiveDamageAbsorption = 100%
	ExplosiveDamageResistance = 50%
	TypeCategories = [armor]
	Flammable = false
	InitialPenetrationResistance = 10
	CreatePartPerTileWhenGrabbed = SW.doonium_armor
	CreatePartPerTileWhenDestroyed = SW.doonium_armor
	DestroyedPartHealthFraction = 98%
	CrewSpeedFactor = 0
	Density = 4 //v:3?
	IsWalled = true
	IsSelfDestructible = false
	AllowedDoorLocations = []
	GeneratorRequiresDoor = false
	IgnoreRotationForMirroredSelection = true
	ReceivableBuffs : ^/0/ReceivableBuffs []
	EditorIcon
	{
		Texture
		{
			File = "../../icon2x2.png"
			SampleMode = Linear
		}
		Size = [64, 64]
	}
	Components : ^/0/Components
	{
		EmpAbsorber
		{
			Type = ExplosiveResourceDrainSink
			ResourceType = battery
			AbsorbsResourceDrain = 4000
			RecoveryRate = (&AbsorbsResourceDrain) * 0.1
		}
		Floor
		{
			Type = SpriteGrid
			Location = [0.5, 0.5]
			GridSize = [8, 8]
			RandomUVRotation = true
			Layer = "floors"
			RandomDamageLevels
			[
				[
					{
						File = "../doonium_armor/armor.png"
						Size = [1, 1]
					}
				]
			]
		}
		Walls
		{
			Type = SpriteGrid
			Location = [0.5, 0.5]
			GridSize = [8, 8]
			Layer = "walls"
			RandomUVRotation = true
			RandomDamageLevels
			[
				[
					{
						File = "../doonium_armor/armor.png"
						Size = [1, 1]
					}
				]
			]
		}
		Roof
		{
			Type = SpriteGrid
			Location = [0.5, 0.5]
			GridSize = [8, 8]
			Layer = "roofs"
			RandomDamageLevels
			[
				[
					{
						File = "../doonium_armor/roof.png"
						NormalsFile = "../doonium_armor/roof2_normals.png"
						Size = [1, 1]
					}
				]
			]
			RandomUVRotation = true
		}

		Blueprints
		{
			Type = BlueprintSprite
			File = "../../blueprints2x2.png"
			Size = [8, 8]
		}
	}

	Stats
	{
		EMPResist = (&~/Part/Components/EmpAbsorber/AbsorbsResourceDrain) / 1000
		HP = 256000
	}
}


